# GTA GXT 文本编辑器 v2.1 说明文档

这是一款为《侠盗猎车手》(Grand Theft Auto) 系列游戏设计的强大文本文件（.gxt）编辑器，由“倾城剑舞”开发。它为游戏汉化人员、和mod开发者提供了一个高效、直观的工具，用于编辑游戏中的所有文本内容。

## 📖程序截图：

### 主界面（GXT文件编辑）
![GXT编辑器主界面][1]  
*左侧为文本条目列表（显示Key和预览值），右侧为编辑区，顶部为功能菜单栏，底部状态栏显示文件版本与加载状态*

### 字体贴图生成器
![字体贴图生成器][2]  
*包含字体设置（字体选择、大小调整）、贴图参数（分辨率、版本适配）、字符预览区及生成控制按钮，支持实时预览字体在游戏中的显示效果*

[1]: https://img.acgs.one/2025-09-21/gE9xlm2F0m.webp
[2]: https://img.acgs.one/2025-09-21/4maSqI6X5W.webp

## 运行程序

该程序基于 Python 和 PySide6 开发。您可以从源代码运行它。

**环境要求**:
-   Python 3.x
-   PySide6

**步骤**:
1.  安装 PySide6 库：
    ```bash
    pip install PySide6
    ```
2.  将 `main.py`, `gxt_parser.py` 以及其他依赖的 `.py` 文件放在同一目录下。
3.  运行主程序：
    ```bash
    python main.py
    ```

## 主要功能

-   **全面的版本支持**:
    -   完美支持 **GTA III, Vice City, San Andreas,  GTA IV, 以及GTA V** 的 GXT 文件。
    -   特别支持 GTA IV 民间汉化补丁常用的 **whm_table.dat** 文件。
-   **强大的编辑功能**:
    -   支持添加、删除、修改文本条目和数据表。
    -   提供高效的**批量编辑**和**批量添加**功能。
    -   内置键名 (Key) 和值 (Value) 的快速**搜索/筛选**功能。
    -   支持多选复制键值对。
-   **灵活的导入与导出**:
    -   可将 GXT 文件完整导出为易于编辑的 **.txt** 格式（单个或多个文件）。
    -   支持从 .txt 文件导入数据，可用于**创建新 GXT** 或**合并**到当前已打开的文件中。
-   **特色工具与易用性**:
    -   内置 **GTA 字体贴图生成器**，一站式解决汉化字体制作需求。
    -   支持 **Windows 系统 .gxt和gxt2 文件关联**，可直接双击 GXT 文件打开。
    -   支持**文件拖拽**操作，方便快速打开文件。（TXT支持拖拽多个，其余只支持单个拖拽！）
    -   现代化、舒适的深色主题界面。

## 软件界面

程序主界面分为几个核心区域，方便用户进行操作。

1.  **菜单栏**: 包含所有功能，如文件操作（打开、保存、导入/导出）、工具（字体生成器）和帮助。
2.  **表列表 (左侧)**: 显示 GXT 文件中所有的文本数据表（如 MAIN, AMERICAN 等）。支持搜索、添加、删除和重命名表。
3.  **键值对视图 (中央)**: 显示当前选中表内的所有文本条目，包含序号、键名 (Key) 和文本值 (Value)。支持搜索、多选和右键操作。
4.  **状态栏 (底部)**: 显示当前状态、文件信息和操作提示。

## 使用说明

### 1. 打开与新建文件
-   **打开文件**:
    -   通过菜单栏 `文件 -> 打开GTA文本文件`。
    -   直接将 `.gxt`, `whm_table.dat`, `gxt2` 或 `.txt（支持多个）` 文件拖拽到程序窗口中。
    -   设置文件关联后，可直接双击 `.gxt``gxt2` 文件打开。
-   **新建文件**:
    -   通过菜单栏 `文件 -> 新建GXT文件` 或 `新建whm_table文件`，并根据提示选择对应的游戏版本。

### 2. 编辑数据
-   **单个编辑**: 双击中央列表中的任意条目，或右键选择“编辑”，即可在弹窗中修改键名和文本值。
-   **批量编辑**: 在中央列表中按住 `Ctrl` 或 `Shift` 键选择多个条目，然后右键选择“批量编辑”。
-   **复制**: 选择一个或多个条目后，右键选择“复制”，可将键值对文本 (`Key=Value`) 复制到剪贴板。

### 3. 添加与删除
-   **表操作**: 使用左侧列表下方的 `➕` 和 `🗑️` 按钮来添加或删除整个数据表。
-   **键值对操作**:
    -   点击中央区域下方的 `➕ 添加键` 按钮来添加新的文本条目（支持单个和批量模式）。
    -   选中一个或多个条目后，右键选择“删除”以移除它们。

### 4. 保存与导出
-   **保存**:
    -   使用快捷键 `Ctrl+S` 或菜单栏 `文件 -> 保存`。
    -   首次保存新文件或使用“另存为”时，程序会提示选择路径。
    -   保存 GXT 时，程序会询问是否生成字符映射辅助文件，这对于 VC 和 SA 的汉化非常有用。
-   **导出**:
    -   **导出为单个 TXT**: 将整个 GXT 文件的所有表合并到一个 .txt 文件中。
    -   **导出为多个 TXT**: 将每个表分别导出为独立的 .txt 文件，并存放在一个指定的文件夹中。

## 工具：GTA 字体贴图生成器

这是一个强大的辅助工具，可以帮助汉化人员或 Modder 快速生成游戏中使用的字体贴图！

**使用步骤:**

1.  **获取字符**:
    -   **从GXT加载**: 自动提取当前编辑器中打开的 GXT 文件里的所有特殊字符（一般下会自己自动加载）。
    -   **导入文件**: 从一个 .txt 文件读入所有需要生成的字符。
    -   **输入字符**: 手动输入或粘贴字符。
2.  **配置字体与参数**:
    -   选择对应的**游戏版本**和**贴图分辨率**。
    -   点击“选择系统字体”或“浏览文件”来指定用于生成贴图的字体（支持 .ttf 和 .otf 格式）。
3.  **预览**: 点击“刷新预览”按钮，可以在下方窗口看到生成的字体贴图的缩略图。点击预览图可以放大查看细节。
4.  **生成文件**: 点击“生成文件”按钮并选择一个输出目录，程序会自动生成 `font.png`（字体贴图）和一个 `font_preview.html`（字符与贴图对应的预览网页）。

## 作者

-   倾城剑舞

---

## ❓ 常见问题

1. **Q：打开文件提示“无法识别版本”？**  
   A：可能是文件损坏或非标准GXT格式，尝试手动指定版本
2. **Q：打开文件后文本显示乱码？**  
   A：这说明某些GXT对文本进行了加密处理！和本软件无关，如果是加密文本 你需要对应的码表来转换文本！

3. **Q：生成的字体贴图在游戏中显示不正常？**  
   A：请更换字体大小，或尝试更换字体文件！
---
